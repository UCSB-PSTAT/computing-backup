
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Remote Devcontainers</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/claat-public/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="devcontainer-setup"
                  title="Remote Devcontainers"
                  environment="web"
                  feedback-link="https://github.com/UCSB-PSTAT/wiki/issues">
    
      <google-codelab-step label="Introduction" duration="0">
        <p class="image-container"><img style="width: 624.00px" src="img/29d65fac866e4cca.gif"></p>
<h2 is-upgraded>Prereqs</h2>
<ul>
<li>Completion of SSH Setup (including GitHub)</li>
<li>Latest version of <a href="https://git-scm.com/downloads" target="_blank">Git</a></li>
<li>A <a href="https://github.com/" target="_blank">GitHub</a> account</li>
<li><a href="https://code.visualstudio.com/" target="_blank">VS Code</a> text editor</li>
</ul>
<h2 is-upgraded>Requirements for local </h2>
<ul>
<li>Latest version of <a href="https://www.docker.com/" target="_blank">Docker</a> (temp link)</li>
</ul>
<h2 is-upgraded>Requirements for remote</h2>
<ul>
<li>Setup of the <a href="https://www.it.ucsb.edu/ivanti-secure-access-campus-vpn/get-connected-campus-vpn" target="_blank">UCSB VPN</a> for connecting to PSTAT servers</li>
<li>SSH Setup (key generation and GitHub) on the remote server</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Start Up: VS Code Extensions" duration="0">
        <p>First, we need to install some necessary extensions on VS Code enable features for dev container and remote development management.  You will need the following extensions:</p>
<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack" target="_blank">Remote Development Pack</a> - SSH + Dev Containers</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-toolsai.jupyter" target="_blank">Jupyter</a> - Notebook support</li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python" target="_blank">Python</a> - Intellisense, linting, debugging</li>
</ul>
<p>You can install these by following the links and clicking &#34;Install&#34; on your browser or you can look them up on VS Code Extension search (using <code>ctrl</code>/⌘ + <code>shift</code> + <code>x</code> shortcut).</p>


      </google-codelab-step>
    
      <google-codelab-step label="Start Up (Optional): Connect to remote server" duration="0">
        <p>If you are planning to run your code via a remote computing server (PSTAT Denali, NSF Jetstream, AWS, etc.), you will first need to connect to your remote server.  With our VS Code extensions, this is made simple:</p>
<ol type="1" start="1">
<li>Click on the <strong>bottom right button</strong> to &#34;Open a Remote Window&#34;.  This will launch the VS Code command palette for remote connections:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/e7b78f90ed714322.png"></p>
<ol type="1" start="2">
<li>Select &#34;Connect Current Window to Host...&#34; option.</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/f4f8707f51fa6425.png"></p>
<ol type="1" start="3">
<li>From here select the host you wish to connect to.  If the remote host that you want to connect to does not appear in the options, use the &#34;Add New SSH Host...&#34; option and follow the prompts to set one up (More information about different server options can be found in the Remote Servers documentation entry).</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/d2bcaf04bcc876db.png"></p>
<ol type="1" start="4">
<li>From here, VS Code will automatically connect to the host for you.  If this is your first time connecting to any remote server, it may take a few seconds for VS Code to install configurations in the background.  You may also be prompted about the type of operating system your server uses.  Please refer to your server&#39;s configuration for this information.  Once the set up is complete you will be greeted with a similar window:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/a9590907d394b925.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Start Up: Cloning and running initial dev container" duration="0">
        <aside class="warning"><p><strong>Remote server users:</strong> If you&#39;re developing using a remote server, make sure that you have gone through the SSH Setup to generate a key on your remote server and add it to your GitHub.</p>
</aside>
<p>Now we are ready to clone and run an initial container setup from GitHub to use both locally and remotely.  </p>
<ol type="1" start="1">
<li>Using the sidebar, click on &#34;Source Control&#34; button (or using keyboard shortcut <code>ctrl</code>/⌘ + <code>shift</code> + <code>g</code>):</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/da8d4a116452b4a8.png"></p>
<ol type="1" start="2">
<li>Click on Clone Repository.  This will open a Command Palette with an option to provide a GitHub URL.  </li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/9151622b8646dec1.png"></p>
<ol type="1" start="3">
<li>For an initial dev container setup for Python/R development go to <a href="https://github.com/syoh/jupyter-rootless-docker" target="_blank">https://github.com/syoh/jupyter-rootless-docker</a> (make sure you are signed in).  Click on &#34;Code&#34; then &#34;SSH&#34; and copy the link:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/93db57149fe46766.png"></p>
<ol type="1" start="4">
<li>Select the &#34;Clone from GitHub&#34; option.  Allow the extension to sign in using GitHub.</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/d049dedfa8e4a0f2.png"></p>
<ol type="1" start="5">
<li>Once GitHub sign-in is complete, paste the GitHub link into the command palette:</li>
</ol>
<p class="image-container"><img style="width: 624.00px" src="img/dc69b3ea05ba713b.png"></p>
<ol type="1" start="6">
<li>You will be asked to choose a location to clone the repository into.  On a local machine this will open your file explorer.  On a remote server it will open another command palette with your current working directory.  Depending on how you wish to setup your directories, you may need to create additional folders as you see fit.</li>
<li>Once cloned, you will be prompted on whether you wish to open the cloned repository.  Select &#34;Open&#34;:</li>
</ol>
<p class="image-container"><img style="width: 347.20px" src="img/6c7aa050f48dd5a1.png"></p>
<ol type="1" start="8">
<li>Once the directory is open, you will have a dialogue box pop up to &#34;Reopen in Container&#34;.  Click this option and wait for the setup to complete.  This will take a little bit of time so hang tight!  You can press the &#34;Show log&#34; dialogue to track the progress.</li>
</ol>
<p class="image-container"><img style="width: 610.00px" src="img/c350345ed92e9a65.png"></p>
<p class="image-container"><img style="width: 378.50px" src="img/f38663f7cf553acb.png"></p>
<aside class="warning"><p><strong>Note:</strong> If you do not see the dialogue box above, open the command palette using <code>ctrl</code>/⌘ + <code>shift</code> + <code>p</code> or <code>F1</code> and type: &#34;Dev Containers: Rebuild and Reopen in Container&#34;.  Select this option and let the dev container build.</p>
</aside>
<aside class="special"><p>You are done!  You will be greeted with the following screen:</p>
</aside>


      </google-codelab-step>
    
      <google-codelab-step label="Devcontainer: Commands" duration="0">
        <p>Now that your dev container is built, let&#39;s get familiar with some dev container basics.</p>
<p>Our dev containers use Docker.  Docker is a container management tool that allows you to download and store &#34;<strong>images</strong>&#34; that can be built and used as &#34;<strong>containers</strong>&#34;.  <em>Images </em>are effectively small installation objects that contain all the necessary components to set up a specific container with a specific environment.  <em>Containers</em> are effectively small environments that have just the base essentials to run all the development tooling that is required.  Containers are built from images.  </p>
<p>Here are some basic commands that will be useful to use in terminal:</p>
<ul>
<li><code>docker images</code> : lists all available images being tracked by Docker</li>
<li><code>docker ps</code> : lists all <strong>running</strong> containers along with their status</li>
<li><code>docker ps -a</code> : lists <strong>all </strong>containers even if they are not running</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Devcontainer: Basics" duration="0">
        <p>Once your container is built, you will be able to use it for your research or programming.  The development container setups provided by the department should be a sufficient starting point.  More advanced setups are discussed in the Devcontainer Customization tutorial.  Here, we will show how to start up, attach, detach, and stop a container.</p>
<h2 is-upgraded>Starting/attaching to a container</h2>
<p>To start and/or attach to a container simply open up the command palette by either clicking on the bottom left remotes button or using the keyboard shortcut (<code>ctrl</code>/⌘ + <code>shift</code> + <code>p</code> or <code>F1</code>).  Then search for &#34;Reopen in Container&#34;</p>
<p class="image-container"><img style="width: 624.00px" src="img/f3f363ec1a48257c.png"></p>
<p>Launch &#34;Reopen in Container&#34; which will setup a new container environment or connect you to an existing one.</p>
<h2 is-upgraded>Detaching from a container</h2>
<p>To detach from a running container, click on the bottom left remotes button or using the keyboard shortcut (<code>ctrl</code>/⌘ + <code>shift</code> + <code>p</code> or <code>F1</code>) search for &#34;Close Remote Connection&#34;.</p>
<p>NEED IMAGE HERE</p>
<p>Clicking this will detach you from the running container.  <strong>However, it will not close the container</strong>.</p>
<h2 is-upgraded>Stopping a running container</h2>
<p>To stop a running container run the following commands:</p>
<ol type="1" start="1">
<li><code>docker ps</code> : run this to figure out which container(s) are running.  You will see a &#34;NAMES&#34; category, this will be the container name to use in the next command.</li>
<li><code>docker container stop <container_name></code> : replace <code><container_name></code> with the previous commands output.</li>
</ol>
<p>Running these 2 commands will stop this container as well as any code or services running in it.</p>
<h2 is-upgraded>More advanced commands</h2>
<p>Docker comes with a swathe of terminal commands to manage containers.  For more advanced commands look at TUTORIAL THAT HASN&#39;T BEEN BUILT YET.</p>
<ul>
<li>Starting</li>
<li>Stopping</li>
<li>Detaching</li>
<li>Attaching</li>
</ul>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/claat-public/native-shim.js"></script>
  <script src="https://storage.googleapis.com/claat-public/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/claat-public/prettify.js"></script>
  <script src="https://storage.googleapis.com/claat-public/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
